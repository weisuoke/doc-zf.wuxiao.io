(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"3kkC":function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),l=t.n(a),r=t("dEAq"),s=t("H1Ra"),i=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"\u5b9e\u73b0-babel-\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u73b0-babel-\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0 Babel \u63d2\u4ef6"),l.a.createElement("h2",{id:"\u62bd\u8c61\u8bed\u6cd5\u6811abstract-syntax-tree"},l.a.createElement(r["AnchorLink"],{to:"#\u62bd\u8c61\u8bed\u6cd5\u6811abstract-syntax-tree","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u62bd\u8c61\u8bed\u6cd5\u6811(Abstract Syntax Tree)"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\uff0c\u62bd\u8c61\u8bed\u6cd5\u6811\uff08Abstract Syntax Tree\uff0cAST\uff09\uff0c\u6216\u7b80\u79f0\u8bed\u6cd5\u6811\uff08Syntax tree\uff09\uff0c\u662f\u6e90\u4ee3\u7801\u8bed\u6cd5\u7ed3\u6784\u7684\u4e00\u79cd\u62bd\u8c61\u8868\u793a\u3002\u5b83\u4ee5\u6811\u72b6\u7684\u5f62\u5f0f\u8868\u73b0\u7f16\u7a0b\u8bed\u8a00\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u6811\u4e0a\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u8868\u793a\u6e90\u4ee3\u7801\u4e2d\u7684\u4e00\u79cd\u7ed3\u6784")),l.a.createElement("h2",{id:"\u62bd\u8c61\u8bed\u6cd5\u6811\u7528\u9014"},l.a.createElement(r["AnchorLink"],{to:"#\u62bd\u8c61\u8bed\u6cd5\u6811\u7528\u9014","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u62bd\u8c61\u8bed\u6cd5\u6811\u7528\u9014"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u4ee3\u7801\u8bed\u6cd5\u7684\u68c0\u67e5\u3001\u4ee3\u7801\u98ce\u683c\u7684\u68c0\u67e5\u3001\u4ee3\u7801\u7684\u683c\u5f0f\u5316\u3001\u4ee3\u7801\u7684\u9ad8\u4eae\u3001\u4ee3\u7801\u9519\u8bef\u63d0\u793a\u3001\u4ee3\u7801\u81ea\u52a8\u8865\u5168\u7b49\u7b49",l.a.createElement("ul",null,l.a.createElement("li",null,"\u5982 JSLint\u3001JSHint \u5bf9\u4ee3\u7801\u9519\u8bef\u6216\u98ce\u683c\u7684\u68c0\u67e5\uff0c\u53d1\u73b0\u4e00\u4e9b\u6f5c\u5728\u7684\u9519\u8bef"),l.a.createElement("li",null,"IDE \u7684\u9519\u8bef\u63d0\u793a\u3001\u683c\u5f0f\u5316\u3001\u9ad8\u4eae\u3001\u81ea\u52a8\u8865\u5168\u7b49\u7b49"))),l.a.createElement("li",null,"\u4ee3\u7801\u6df7\u6dc6\u538b\u7f29",l.a.createElement("ul",null,l.a.createElement("li",null,"UglifyJS2 \u7b49"))),l.a.createElement("li",null,"\u4f18\u5316\u53d8\u66f4\u4ee3\u7801\uff0c\u6539\u53d8\u4ee3\u7801\u7ed3\u6784\u4f7f\u8fbe\u5230\u60f3\u8981\u7684\u7ed3\u6784",l.a.createElement("ul",null,l.a.createElement("li",null,"\u4ee3\u7801\u6253\u5305\u5de5\u5177 webpack\u3001rollup \u7b49\u7b49"),l.a.createElement("li",null,"CommonJS\u3001AMD\u3001CMD\u3001UMD \u7b49\u4ee3\u7801\u89c4\u8303\u4e4b\u95f4\u7684\u8f6c\u5316"),l.a.createElement("li",null,"CoffeeScript\u3001TypeScript\u3001JSX \u7b49\u8f6c\u5316\u4e3a\u539f\u751f Javascript")))),l.a.createElement("h2",{id:"\u62bd\u8c61\u8bed\u6cd5\u6811\u5b9a\u4e49"},l.a.createElement(r["AnchorLink"],{to:"#\u62bd\u8c61\u8bed\u6cd5\u6811\u5b9a\u4e49","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u62bd\u8c61\u8bed\u6cd5\u6811\u5b9a\u4e49"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u8fd9\u4e9b\u5de5\u5177\u7684\u539f\u7406\u90fd\u662f\u901a\u8fc7",l.a.createElement("code",null,"JavaScript Parser"),"\u628a\u4ee3\u7801\u8f6c\u5316\u4e3a\u4e00\u9897\u62bd\u8c61\u8bed\u6cd5\u6811\uff08AST\uff09\uff0c\u8fd9\u9897\u6811\u5b9a\u4e49\u4e86\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u901a\u8fc7\u64cd\u7eb5\u8fd9\u9897\u6811\uff0c\u6211\u4eec\u53ef\u4ee5\u7cbe\u51c6\u7684\u5b9a\u4f4d\u5230\u58f0\u660e\u8bed\u53e5\u3001\u8d4b\u503c\u8bed\u53e5\u3001\u8fd0\u7b97\u8bed\u53e5\u7b49\u7b49\uff0c\u5b9e\u73b0\u5bf9\u4ee3\u7801\u7684\u5206\u6790\u3001\u4f18\u5316\u3001\u53d8\u66f4\u7b49\u64cd\u4f5c")),l.a.createElement("p",null,l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-024330.jpg",alt:"ast"})),l.a.createElement("h2",{id:"javascript-parser"},l.a.createElement(r["AnchorLink"],{to:"#javascript-parser","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"JavaScript Parser"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"JavaScript Parser"),"\u662f\u628aJavaScript\u6e90\u7801\u8f6c\u5316\u4e3a\u62bd\u8c61\u8bed\u6cd5\u6811\u7684\u89e3\u6790\u5668")),l.a.createElement("h3",{id:"\u5e38\u7528\u7684-javascript-parser"},l.a.createElement(r["AnchorLink"],{to:"#\u5e38\u7528\u7684-javascript-parser","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5e38\u7528\u7684 JavaScript Parser"),l.a.createElement("ul",null,l.a.createElement("li",null,"esprima"),l.a.createElement("li",null,"traceur"),l.a.createElement("li",null,"acorn"),l.a.createElement("li",null,"shift")),l.a.createElement("h3",{id:"ast\u904d\u5386"},l.a.createElement(r["AnchorLink"],{to:"#ast\u904d\u5386","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"AST\u904d\u5386"),l.a.createElement("ul",null,l.a.createElement("li",null,"AST\u662f\u6df1\u5ea6\u4f18\u5148\u904d\u5386")),l.a.createElement(s["a"],{code:"npm i esprima estraverse escodegen -S",lang:"shell"}),l.a.createElement(s["a"],{code:"let esprima = require('esprima');//\u628aJS\u6e90\u4ee3\u7801\u8f6c\u6210AST\u8bed\u6cd5\u6811\nlet estraverse = require('estraverse');///\u904d\u5386\u8bed\u6cd5\u6811,\u4fee\u6539\u6811\u4e0a\u7684\u8282\u70b9\nlet escodegen = require('escodegen');//\u628aAST\u8bed\u6cd5\u6811\u91cd\u65b0\u8f6c\u6362\u6210\u4ee3\u7801\nlet code = `function ast(){}`;\nlet ast = esprima.parse(code);\nlet indent = 0;\nconst padding = ()=>\" \".repeat(indent);\nestraverse.traverse(ast,{\n    enter(node){\n        console.log(padding()+node.type+'\u8fdb\u5165');\n        if(node.type === 'FunctionDeclaration'){\n            node.id.name = 'newAst';\n        }\n        indent+=2;\n    },\n    leave(node){\n        indent-=2;\n        console.log(padding()+node.type+'\u79bb\u5f00');\n    }\n});",lang:"js"}),l.a.createElement(s["a"],{code:"Program\u8fdb\u5165\n  FunctionDeclaration\u8fdb\u5165\n    Identifier\u8fdb\u5165\n    Identifier\u79bb\u5f00\n    BlockStatement\u8fdb\u5165\n    BlockStatement\u79bb\u5f00\n  FunctionDeclaration\u79bb\u5f00\nProgram\u79bb\u5f00",lang:"js"}),l.a.createElement("h2",{id:"babel"},l.a.createElement(r["AnchorLink"],{to:"#babel","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"babel"),l.a.createElement("ul",null,l.a.createElement("li",null,"Babel \u80fd\u591f\u8f6c\u8bd1 ",l.a.createElement("code",null,"ECMAScript 2015+")," \u7684\u4ee3\u7801\uff0c\u4f7f\u5b83\u5728\u65e7\u7684\u6d4f\u89c8\u5668\u6216\u8005\u73af\u5883\u4e2d\u4e5f\u80fd\u591f\u8fd0\u884c"),l.a.createElement("li",null,"\u5de5\u4f5c\u8fc7\u7a0b\u5206\u4e3a\u4e09\u4e2a\u90e8\u4eba",l.a.createElement("ul",null,l.a.createElement("li",null,"Parse(\u89e3\u6790) \u5c06\u6e90\u4ee3\u7801\u8f6c\u6362\u6210\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u6811\u4e0a\u6709\u5f88\u591a\u7684",l.a.createElement(r["Link"],{to:"https://github.com/estree/estree"},"estree\u8282\u70b9")),l.a.createElement("li",null,"Transform(\u8f6c\u6362) \u5bf9\u62bd\u8c61\u8bed\u6cd5\u6811\u8fdb\u884c\u8f6c\u6362"),l.a.createElement("li",null,"Generate(\u4ee3\u7801\u751f\u6210) \u5c06\u4e0a\u4e00\u6b65\u7ecf\u8fc7\u8f6c\u6362\u8fc7\u7684\u62bd\u8c61\u8bed\u6cd5\u6811\u751f\u6210\u65b0\u7684\u4ee3\u7801")))),l.a.createElement("p",null,l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-024535.png",alt:"ast-compiler-flow.jpg"})),l.a.createElement("h3",{id:"babel-\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#babel-\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"babel \u63d2\u4ef6"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://github.com/babel/babel/tree/master/packages/@babel/parser"},"@babel/parser")," \u53ef\u4ee5\u628a\u6e90\u7801\u8f6c\u6362\u6210AST"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/babel-traverse"},"@babel/traverse"),"\u7528\u4e8e\u5bf9 AST \u7684\u904d\u5386\uff0c\u7ef4\u62a4\u4e86\u6574\u68f5\u6811\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u8d1f\u8d23\u66ff\u6362\u3001\u79fb\u9664\u548c\u6dfb\u52a0\u8282\u70b9"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://github.com/babel/babel/tree/master/packages/@babel/generate"},"@babel/generate")," \u53ef\u4ee5\u628aAST\u751f\u6210\u6e90\u7801\uff0c\u540c\u65f6\u751f\u6210sourcemap"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://github.com/babel/babel/tree/master/packages/babel-types"},"@babel/types")," \u7528\u4e8e AST \u8282\u70b9\u7684 Lodash \u5f0f\u5de5\u5177\u5e93, \u5b83\u5305\u542b\u4e86\u6784\u9020\u3001\u9a8c\u8bc1\u4ee5\u53ca\u53d8\u6362 AST \u8282\u70b9\u7684\u65b9\u6cd5\uff0c\u5bf9\u7f16\u5199\u5904\u7406 AST \u903b\u8f91\u975e\u5e38\u6709\u7528"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/@babel/template"},"@babel/template"),"\u53ef\u4ee5\u7b80\u5316AST\u7684\u521b\u5efa\u903b\u8f91"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/@babel/code-frame"},"@babel/code-frame"),"\u53ef\u4ee5\u6253\u5370\u4ee3\u7801\u4f4d\u7f6e"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/@babel/core"},"@babel/core")," Babel \u7684\u7f16\u8bd1\u5668\uff0c\u6838\u5fc3 API \u90fd\u5728\u8fd9\u91cc\u9762\uff0c\u6bd4\u5982\u5e38\u89c1\u7684 transform\u3001parse,\u5e76\u5b9e\u73b0\u4e86\u63d2\u4ef6\u529f\u80fd"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/babylon"},"babylon")," Babel \u7684\u89e3\u6790\u5668\uff0c\u4ee5\u524d\u53ebbabel parser,\u662f\u57fa\u4e8eacorn\u6269\u5c55\u800c\u6765\uff0c\u6269\u5c55\u4e86\u5f88\u591a\u8bed\u6cd5,\u53ef\u4ee5\u652f\u6301es2020\u3001jsx\u3001typescript\u7b49\u8bed\u6cd5"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://babeljs.io/docs/en/next/babel-types.html"},"babel-types-api")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://github.com/brigand/babel-plugin-handbook/blob/master/translations/zh-Hans/README.md#asts"},"Babel \u63d2\u4ef6\u624b\u518c")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://babeljs.io/en/repl.html"},"babeljs.io")," babel \u53ef\u89c6\u5316\u7f16\u8bd1\u5668")),l.a.createElement("h3",{id:"visitor"},l.a.createElement(r["AnchorLink"],{to:"#visitor","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"Visitor"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u8bbf\u95ee\u8005\u6a21\u5f0f Visitor \u5bf9\u4e8e\u67d0\u4e2a\u5bf9\u8c61\u6216\u8005\u4e00\u7ec4\u5bf9\u8c61\uff0c\u4e0d\u540c\u7684\u8bbf\u95ee\u8005\uff0c\u4ea7\u751f\u7684\u7ed3\u679c\u4e0d\u540c\uff0c\u6267\u884c\u64cd\u4f5c\u4e5f\u4e0d\u540c"),l.a.createElement("li",null,"Visitor \u7684\u5bf9\u8c61\u5b9a\u4e49\u4e86\u7528\u4e8e AST \u4e2d\u83b7\u53d6\u5177\u4f53\u8282\u70b9\u7684\u65b9\u6cd5"),l.a.createElement("li",null,"Visitor \u4e0a\u6302\u8f7d\u4ee5\u8282\u70b9 ",l.a.createElement("code",null,"type")," \u547d\u540d\u7684\u65b9\u6cd5\uff0c\u5f53\u904d\u5386 AST \u7684\u65f6\u5019\uff0c\u5982\u679c\u5339\u914d\u4e0a type\uff0c\u5c31\u4f1a\u6267\u884c\u5bf9\u5e94\u7684\u65b9\u6cd5")),l.a.createElement("h3",{id:"\u8f6c\u6362\u7bad\u5934\u51fd\u6570"},l.a.createElement(r["AnchorLink"],{to:"#\u8f6c\u6362\u7bad\u5934\u51fd\u6570","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u8f6c\u6362\u7bad\u5934\u51fd\u6570"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://astexplorer.net/"},"astexplorer")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/babel-plugin-transform-es2015-arrow-functions"},"babel-plugin-transform-es2015-arrow-functions")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://babeljs.io/en/repl.html"},"babeljs.io")," babel \u53ef\u89c6\u5316\u7f16\u8bd1\u5668"),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/README.md"},"babel-handbook")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://babeljs.io/docs/en/next/babel-types.html"},"babel-types-api"))),l.a.createElement("p",null,"\u8f6c\u6362\u524d"),l.a.createElement(s["a"],{code:"const sum = (a,b)=>{\n    console.log(this);\n    return a+b;\n}",lang:"js"}),l.a.createElement("p",null,"\u8f6c\u6362\u540e"),l.a.createElement(s["a"],{code:"var _this = this;\n\nconst sum = function (a, b) {\n  console.log(_this);\n  return a + b;\n};\nnpm i @babel/core babel-types -D",lang:"js"}),l.a.createElement("p",null,"\u5b9e\u73b0"),l.a.createElement(s["a"],{code:"//babel\u6838\u5fc3\u6a21\u5757\nconst core = require('@babel/core');\n//\u7528\u6765\u751f\u6210\u6216\u8005\u5224\u65ad\u8282\u70b9\u7684AST\u8bed\u6cd5\u6811\u7684\u8282\u70b9\nlet types = require(\"@babel/types\");\n//let arrowFunctionPlugin = require('babel-plugin-transform-es2015-arrow-functions');\nlet arrowFunctionPlugin = {\n    visitor: {\n        //\u5982\u679c\u662f\u7bad\u5934\u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u4f1a\u8fdb\u6765\u6b64\u51fd\u6570\uff0c\u53c2\u6570\u662f\u7bad\u5934\u51fd\u6570\u7684\u8282\u70b9\u8def\u5f84\u5bf9\u8c61\n        ArrowFunctionExpression(path) {\n            let node = path.node;\n            hostFunctionEnvironment(path);\n            node.type = 'FunctionExpression';\n        }\n    }\n}\n/**\n * 1.\u8981\u5728\u51fd\u6570\u7684\u5916\u9762\u58f0\u660e\u4e00\u4e2a_this\u53d8\u91cf\uff0c\u503c\u662fthis\n * 2.\u5728\u51fd\u6570\u7684\u5185\u5bb9\uff0c\u6362this \u53d8\u6210_this\n * @param {*} path \n */\nfunction hostFunctionEnvironment(path) {\n    //\u786e\u5b9a\u6211\u7684this\u53d8\u91cf\u5728\u54ea\u4e2a\u73af\u5883\u91cc\u751f\u6210\uff0c\u5411\u4e0a\u67e5\u627e \u662f\u666e\u901a\u51fd\u6570\u6216\u8005\u662f\u6839\u8282\u70b9 Program\n    const thisEnvFn = path.findParent(parent => {\n        return (parent.isFunction() && !path.isArrowFunctionExpression()) || parent.isProgram();\n    });\n    let thisBindings = '_this';\n    //var _this = this;\n    if (!thisEnvFn.scope.hasBinding(thisBindings)) {\n        thisEnvFn.scope.push({\n            id: types.identifier(thisBindings),//_this\n            init: types.thisExpression()//this\n        });\n    }\n    //\u66ff\u6362this\n    let thisPaths = getScopeInfo(path);\n    thisPaths.forEach(thisPath => {\n        //\u628athis\u66ff\u6362\u6210_this\n        thisPath.replaceWith(types.identifier(thisBindings));\n    })\n}\nfunction getScopeInfo(path) {\n    let thisPaths = [];\n    path.traverse({\n        ThisExpression(path) {\n            thisPaths.push(path);\n        }\n    })\n    return thisPaths;\n}\nlet sourceCode = `\nconst sum = (a, b) => {\n    console.log(this);\n    const minus = (c,d)=>{\n          console.log(this);\n        return c-d;\n    }\n    return a + b;\n}\n`;\nlet targetSource = core.transform(sourceCode, {\n    plugins: [arrowFunctionPlugin]\n});\n\nconsole.log(targetSource.code);",lang:"js"}),l.a.createElement("h3",{id:"\u628a\u7c7b\u7f16\u8bd1\u4e3a-function"},l.a.createElement(r["AnchorLink"],{to:"#\u628a\u7c7b\u7f16\u8bd1\u4e3a-function","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u628a\u7c7b\u7f16\u8bd1\u4e3a Function"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/@babel/plugin-transform-classes"},"@babel/plugin-transform-classes"))),l.a.createElement("p",null,"es6"),l.a.createElement(s["a"],{code:"class Person {\n  constructor(name) {\n    this.name = name;\n  }\n  getName() {\n    return this.name;\n  }\n}",lang:"js"}),l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-024839.png",alt:"classast",style:{zoom:"50%"}}),l.a.createElement("p",null,"es5"),l.a.createElement(s["a"],{code:"function Person(name) {\n  this.name = name;\n}\nPerson.prototype.getName = function () {\n  return this.name;\n};",lang:"js"}),l.a.createElement("p",null,l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-024847.png",alt:"es5class1",style:{zoom:"50%"}})," ",l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-024900.png",alt:"es5class2",style:{zoom:"50%"}})),l.a.createElement("p",null,"\u5b9e\u73b0"),l.a.createElement(s["a"],{code:"//babel\u6838\u5fc3\u6a21\u5757\nconst core = require('@babel/core');\n//\u7528\u6765\u751f\u6210\u6216\u8005\u5224\u65ad\u8282\u70b9\u7684AST\u8bed\u6cd5\u6811\u7684\u8282\u70b9\nlet types = require(\"@babel/types\");\n//let transformClassesPlugin = require('@babel/plugin-transform-classes');\nlet transformClassesPlugin = {\n    visitor: {\n        //\u5982\u679c\u662f\u7bad\u5934\u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u4f1a\u8fdb\u6765\u6b64\u51fd\u6570\uff0c\u53c2\u6570\u662f\u7bad\u5934\u51fd\u6570\u7684\u8282\u70b9\u8def\u5f84\u5bf9\u8c61\n        //path\u4ee3\u8868\u8def\u5f84\uff0cnode\u4ee3\u8868\u8def\u5f84\u4e0a\u7684\u8282\u70b9\n        ClassDeclaration(path) {\n            let node = path.node;\n            let id = node.id;//Identifier name:Person\n            let methods = node.body.body;//Array<MethodDefinition>\n            let nodes = [];\n            methods.forEach(method => {\n                if (method.kind === 'constructor') {\n                    let constructorFunction = types.functionDeclaration(\n                        id,\n                        method.params,\n                        method.body\n                    );\n                    nodes.push(constructorFunction);\n                } else {\n                    let memberExpression = types.memberExpression(\n                        types.memberExpression(\n                            id, types.identifier('prototype')\n                        ), method.key\n                    )\n                    let functionExpression = types.functionExpression(\n                        null,\n                        method.params,\n                        method.body\n                    )\n                    let assignmentExpression = types.assignmentExpression(\n                        '=',\n                        memberExpression,\n                        functionExpression\n                    );\n                    nodes.push(assignmentExpression);\n                }\n            })\n            if (nodes.length === 1) {\n                //\u5355\u8282\u70b9\u7528replaceWith\n                //path\u4ee3\u8868\u8def\u5f84\uff0c\u7528nodes[0]\u8fd9\u4e2a\u65b0\u8282\u70b9\u66ff\u6362\u65e7path\u4e0a\u73b0\u6709\u8001\u8282\u70b9node ClassDeclaration\n                path.replaceWith(nodes[0]);\n            } else {\n                //\u591a\u8282\u70b9\u7528replaceWithMultiple\n                path.replaceWithMultiple(nodes);\n            }\n        }\n    }\n}\nlet sourceCode = `\nclass Person{\n    constructor(name){\n        this.name = name;\n    }\n    sayName(){\n        console.log(this.name);\n    }\n}\n`;\nlet targetSource = core.transform(sourceCode, {\n    plugins: [transformClassesPlugin]\n});\n\nconsole.log(targetSource.code);",lang:"js"})))}));n["default"]=e=>{var n=l.a.useContext(r["context"]),t=n.demos;return l.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(i,{demos:t})}}}]);