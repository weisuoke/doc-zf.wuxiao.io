(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{A5XQ:function(e,n,t){"use strict";t.r(n);var o=t("q1tI"),a=t.n(o),r=t("dEAq"),l=t("H1Ra"),c=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"\u9ad8\u9636\u7ec4\u4ef6"},a.a.createElement(r["AnchorLink"],{to:"#\u9ad8\u9636\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u9ad8\u9636\u7ec4\u4ef6"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u9ad8\u9636\u7ec4\u4ef6\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f20\u7ed9\u5b83\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6"),a.a.createElement("li",null,"\u9ad8\u9636\u7ec4\u4ef6\u7684\u4f5c\u7528\u5176\u5b9e\u5c31\u662f\u4e3a\u4e86\u7ec4\u4ef6\u4e4b\u95f4\u7684\u4ee3\u7801\u590d\u7528")),a.a.createElement(l["a"],{code:"const NewComponent = higherOrderComponent(OldComponent)",lang:"js"}),a.a.createElement("h2",{id:"cra\u652f\u6301\u88c5\u9970\u5668"},a.a.createElement(r["AnchorLink"],{to:"#cra\u652f\u6301\u88c5\u9970\u5668","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"cra\u652f\u6301\u88c5\u9970\u5668"),a.a.createElement("h3",{id:"\u5b89\u88c5"},a.a.createElement(r["AnchorLink"],{to:"#\u5b89\u88c5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5b89\u88c5"),a.a.createElement(l["a"],{code:"npm i react-app-rewired customize-cra @babel/plugin-proposal-decorators -D",lang:"shell"}),a.a.createElement("h3",{id:"\u4fee\u6539packagejson"},a.a.createElement(r["AnchorLink"],{to:"#\u4fee\u6539packagejson","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4fee\u6539package.json"),a.a.createElement(l["a"],{code:'"scripts": {\n    "start": "cross-env DISABLE_NEW_JSX_TRANSFORM=true react-app-rewired start",\n    "build": "cross-env DISABLE_NEW_JSX_TRANSFORM=true react-app-rewired build",\n    "test": "cross-env DISABLE_NEW_JSX_TRANSFORM=true react-app-rewired test",\n    "eject": "cross-env DISABLE_NEW_JSX_TRANSFORM=true react-app-rewired eject"\n  },',lang:"json"}),a.a.createElement("h3",{id:"config-overridesjs"},a.a.createElement(r["AnchorLink"],{to:"#config-overridesjs","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"config-overrides.js"),a.a.createElement(l["a"],{code:'const {override,addBabelPlugins} = require(\'customize-cra\');\n\nmodule.exports = override(\n  addBabelPlugins( [\n    "@babel/plugin-proposal-decorators", { "legacy": true }\n  ])\n)',lang:"js"}),a.a.createElement("h3",{id:"jsconfigjson"},a.a.createElement(r["AnchorLink"],{to:"#jsconfigjson","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"jsconfig.json"),a.a.createElement(l["a"],{code:'{\n  "compilerOptions": {\n     "experimentalDecorators": true\n  }\n}',lang:"json"}),a.a.createElement("h2",{id:"\u5c5e\u6027\u4ee3\u7406"},a.a.createElement(r["AnchorLink"],{to:"#\u5c5e\u6027\u4ee3\u7406","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5c5e\u6027\u4ee3\u7406"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u57fa\u4e8e\u5c5e\u6027\u4ee3\u7406\uff1a\u64cd\u4f5c\u7ec4\u4ef6\u7684props")),a.a.createElement(l["a"],{code:"import React from 'react';\nimport ReactDOM from 'react-dom';\nconst loading = message =>OldComponent =>{\n    return class extends React.Component{\n        render(){\n            const state = {\n                show:()=>{\n                    let div = document.createElement('div');\n                    div.innerHTML = `<p id=\"loading\" style=\"position:absolute;top:100px;z-index:10;background-color:black\">${message}</p>`;\n                    document.body.appendChild(div);\n                },\n                hide:()=>{\n                    document.getElementById('loading').remove();\n                }\n            }\n            return  (\n                <OldComponent {...this.props} {...state} {...{...this.props,...state}}/>\n            )\n        }\n    }\n}\n@loading('\u6b63\u5728\u52a0\u8f7d\u4e2d')\nclass Hello extends React.Component{\n  render(){\n     return <div>hello<button onClick={this.props.show}>show</button><button onClick={this.props.hide}>hide</button></div>;\n  }\n}\nlet LoadingHello  = loading('\u6b63\u5728\u52a0\u8f7d')(Hello);\n\nReactDOM.render(\n    <LoadingHello/>, document.getElementById('root'));",lang:"js"}),a.a.createElement("h2",{id:"\u53cd\u5411\u7ee7\u627f"},a.a.createElement(r["AnchorLink"],{to:"#\u53cd\u5411\u7ee7\u627f","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u53cd\u5411\u7ee7\u627f"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u57fa\u4e8e\u53cd\u5411\u7ee7\u627f\uff1a\u62e6\u622a\u751f\u547d\u5468\u671f\u3001state\u3001\u6e32\u67d3\u8fc7\u7a0b")),a.a.createElement(l["a"],{code:"import React from 'react';\nimport ReactDOM from 'react-dom';\nclass Button extends React.Component{\n    state = {name:'\u5f20\u4e09'}\n    componentWillMount(){\n        console.log('Button componentWillMount');\n    }\n    componentDidMount(){\n        console.log('Button componentDidMount');\n    }\n    render(){\n        console.log('Button render');\n        return <button name={this.state.name} title={this.props.title}/>\n    }\n}\nconst wrapper = OldComponent =>{\n    return class NewComponent extends OldComponent{\n        state = {number:0}\n        componentWillMount(){\n            console.log('WrapperButton componentWillMount');\n             super.componentWillMount();\n        }\n        componentDidMount(){\n            console.log('WrapperButton componentDidMount');\n             super.componentDidMount();\n        }\n        handleClick = ()=>{\n            this.setState({number:this.state.number+1});\n        }\n        render(){\n            console.log('WrapperButton render');\n            let renderElement = super.render();\n            let newProps = {\n                ...renderElement.props,\n                ...this.state,\n                onClick:this.handleClick\n            }\n            return  React.cloneElement(\n                renderElement,\n                newProps,\n                this.state.number\n            );\n        }\n    }\n}\nlet WrappedButton = wrapper(Button);\nReactDOM.render(\n    <WrappedButton title=\"\u6807\u9898\"/>, document.getElementById('root'));",lang:"js"}),a.a.createElement("h2",{id:"srcreactjs"},a.a.createElement(r["AnchorLink"],{to:"#srcreactjs","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"src\\react.js"),a.a.createElement(l["a"],{code:'+ function cloneElement(element, newProps, ...newChildren) {\n+   let oldChildren = element.props && element.props.children\n+   oldChildren = (Array.isArray(oldChildren) ? oldChildren : [oldChildren]).filter(item => typeof item !== "undefined").map(wrapToVdom)\n+   newChildren = newChildren.filter(item => typeof item !== "undefined").map(wrapToVdom)\n+   let props = {...element.props, ...newProps}\n+   if (newChildren.length > 0) {\n+     props.children = newChildren\n+   } else {\n+     props.children = oldChildren\n+   }\n+   if (props.children.length === 0) {\n+     props.children = undefined\n+   } else if (props.children.length === 1) {\n+     props.children = props.children[0]\n+   }\n+   return {...element, props}\n+ }\n\nconst React = {\n  createElement,\n  Component,\n  createRef,\n  forwardRef,\n  createContext,\n+ cloneElement,\n}\nexport default React',lang:"diff"})))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),t=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(c,{demos:t})}}}]);