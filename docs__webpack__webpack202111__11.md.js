(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[75],{kVno:function(e,n,a){"use strict";a.r(n);var t=a("q1tI"),l=a.n(t),r=a("dEAq"),o=a("H1Ra"),i=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"\u7f16\u5199babel\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#\u7f16\u5199babel\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u7f16\u5199babel\u63d2\u4ef6"),l.a.createElement("h2",{id:"webpack\u4e2d\u4f7f\u7528babel\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#webpack\u4e2d\u4f7f\u7528babel\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"webpack\u4e2d\u4f7f\u7528babel\u63d2\u4ef6"),l.a.createElement("h3",{id:"\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d"},l.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.lodashjs.com/docs/4.17.5.html#concat"},"lodashjs")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://babeljs.io/docs/en/babel-core"},"babel-core")),l.a.createElement("li",null,l.a.createElement(r["Link"],{to:"https://www.npmjs.com/package/babel-plugin-import"},"babel-plugin-import"))),l.a.createElement(o["a"],{code:'import { flatten, concat } from "lodash";',lang:"js"}),l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-064328.png",alt:"treeshakingleft",style:{zoom:"75%"}}),l.a.createElement("p",null,"\u8f6c\u6362\u4e3a"),l.a.createElement(o["a"],{code:'import flatten from "lodash/flatten";\nimport concat from "lodash/flatten";',lang:"js"}),l.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-17-064333.png",alt:"treeshakingright",style:{zoom:"75%"}}),l.a.createElement("h4",{id:"webpack-\u914d\u7f6e"},l.a.createElement(r["AnchorLink"],{to:"#webpack-\u914d\u7f6e","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"webpack \u914d\u7f6e"),l.a.createElement(o["a"],{code:'npm i webpack webpack-cli babel-plugin-import -D\nconst path = require("path");\nmodule.exports = {\n  mode: "development",\n  entry: "./src/index.js",\n  output: {\n    path: path.resolve("dist"),\n    filename: "bundle.js",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: {\n          loader: "babel-loader",\n          options:{\n                   plugins:[\n                     [\n                       path.resolve(__dirname,\'plugins/babel-plugin-import.js\'),\n                       {\n                         libraryName:\'lodash\'\n                       }\n                     ]\n                   ]\n                }\n        },\n      },\n    ],\n  },\n};',lang:"js"}),l.a.createElement("blockquote",null,l.a.createElement("p",null,"\u7f16\u8bd1\u987a\u5e8f\u4e3a\u9996\u5148",l.a.createElement("code",null,"plugins"),"\u4ece\u5de6\u5f80\u53f3,\u7136\u540e",l.a.createElement("code",null,"presets"),"\u4ece\u53f3\u5f80\u5de6")),l.a.createElement("h4",{id:"babel-\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#babel-\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"babel \u63d2\u4ef6"),l.a.createElement("p",null,"plugins\\babel-plugin-import.js"),l.a.createElement(o["a"],{code:"//babel\u6838\u5fc3\u6a21\u5757\nconst core = require('@babel/core');\n//\u7528\u6765\u751f\u6210\u6216\u8005\u5224\u65ad\u8282\u70b9\u7684AST\u8bed\u6cd5\u6811\u7684\u8282\u70b9\nlet types = require(\"@babel/types\");\n\nconst visitor = {\n    ImportDeclaration(path, state) {\n        const { node } = path;//\u83b7\u53d6\u8282\u70b9\n        const { specifiers } = node;//\u83b7\u53d6\u6279\u91cf\u5bfc\u5165\u58f0\u660e\u6570\u7ec4\n        const { libraryName, libraryDirectory = 'lib' } = state.opts;//\u83b7\u53d6\u9009\u9879\u4e2d\u7684\u652f\u6301\u7684\u5e93\u7684\u540d\u79f0\n        //\u5982\u679c\u5f53\u524d\u7684\u8282\u70b9\u7684\u6a21\u5757\u540d\u79f0\u662f\u6211\u4eec\u9700\u8981\u7684\u5e93\u7684\u540d\u79f0\n        if (node.source.value === libraryName\n            //\u5e76\u4e14\u5bfc\u5165\u4e0d\u662f\u9ed8\u8ba4\u5bfc\u5165\u624d\u4f1a\u8fdb\u6765\n            && !types.isImportDefaultSpecifier(specifiers[0])) {\n            //\u904d\u5386\u6279\u91cf\u5bfc\u5165\u58f0\u660e\u6570\u7ec4\n            const declarations = specifiers.map(specifier => {\n                //\u8fd4\u56de\u4e00\u4e2aimportDeclaration\u8282\u70b9\n                return types.importDeclaration(\n                    //\u5bfc\u5165\u58f0\u660eimportDefaultSpecifier flatten\n                    [types.importDefaultSpecifier(specifier.local)],\n                    //\u5bfc\u5165\u6a21\u5757source lodash/flatten\n                    types.stringLiteral(libraryDirectory ? `${libraryName}/${libraryDirectory}/${specifier.imported.name}` : `${libraryName}/${specifier.imported.name}`)\n                );\n            })\n            path.replaceWithMultiple(declarations);//\u66ff\u6362\u5f53\u524d\u8282\u70b9\n        }\n    }\n}\n\n\nmodule.exports = function () {\n    return {\n        visitor\n    }\n}",lang:"js"}),l.a.createElement("h3",{id:"\u5b9e\u73b0\u65e5\u5fd7\u63d2\u4ef6"},l.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u73b0\u65e5\u5fd7\u63d2\u4ef6","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u65e5\u5fd7\u63d2\u4ef6"),l.a.createElement("h4",{id:"loggerjs"},l.a.createElement(r["AnchorLink"],{to:"#loggerjs","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"logger.js"),l.a.createElement(o["a"],{code:"//babel\u6838\u5fc3\u6a21\u5757\nconst core = require('@babel/core');\n//\u7528\u6765\u751f\u6210\u6216\u8005\u5224\u65ad\u8282\u70b9\u7684AST\u8bed\u6cd5\u6811\u7684\u8282\u70b9\nconst types = require(\"@babel/types\");\nconst path = require('path');\nconst visitor = {\n    CallExpression(nodePath, state) {\n        const { node } = nodePath;\n        if (types.isMemberExpression(node.callee)) {\n            if (node.callee.object.name === 'console') {\n                if (['log', 'info', 'warn', 'error', 'debug'].includes(node.callee.property.name)) {\n                    const { line, column } = node.loc.start;\n                    const relativeFileName = path.relative(__dirname, state.file.opts.filename).replace(/\\\\/g, '/');\n                    node.arguments.unshift(types.stringLiteral(`${relativeFileName} ${line}:${column}`));\n                }\n            }\n        }\n    }\n}\nmodule.exports = function () {\n    return {\n        visitor\n    }\n}\n/* {\n    loc: {\n        start: { line: 1, column: 1 }\n    }\n} */",lang:"js"})))}));n["default"]=e=>{var n=l.a.useContext(r["context"]),a=n.demos;return l.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(i,{demos:a})}}}]);