(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{ujnm:function(e,n,t){"use strict";t.r(n);var o=t("q1tI"),r=t.n(o),l=t("dEAq"),c=t("H1Ra"),a=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"\u91cd\u6784--fragment"},r.a.createElement(l["AnchorLink"],{to:"#\u91cd\u6784--fragment","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u91cd\u6784 + Fragment"),r.a.createElement("p",null,"src/ReactFlag.js"),r.a.createElement(c["a"],{code:"export const PLACEMENT = 'PLACEMENT'\nexport const MOVE = 'MOVE'",lang:"js"}),r.a.createElement("p",null,"src/ReactSymbols.js"),r.a.createElement(c["a"],{code:"// symbol \u865a\u62dfDOM\u7684$$typeof\nexport const REACT_ELEMENT = Symbol.for('react.element')  // \u5143\u7d20\nexport const REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref') // \u8f6c\u53d1\nexport const REACT_CONTEXT = Symbol.for('react.context')  // _currentValue\nexport const REACT_PROVIDER = Symbol.for('react.provider') // _currentValue\nexport const REACT_MEMO = Symbol.for('react.memo')  // \u7f13\u5b58\u7684memo\nexport const REACT_TEXT = Symbol.for('react.text')  // \u6587\u672c\nexport const REACT_FRAGMENT = Symbol.for('react.fragment') // \u7247\u6bb5",lang:"js"}),r.a.createElement("p",null,"src/utils.js"),r.a.createElement(c["a"],{code:"+ import { REACT_TEXT } from \"./ReactSymbols\";\n\n/**\n * \u628a\u865a\u62df DOM \u8282\u70b9\u8fdb\u884c\u5305\u88c5\n * \u5982\u679c\u6b64\u865a\u62dfDOM\u662f\u4e00\u4e2a\u6587\u672c\uff0c\u6bd4\u5982\u8bf4\u662f\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u865a\u62dfDOM\u8282\u70b9\u5bf9\u8c61\n * @param element \u865a\u62dfDOM\n * @returns {{type: symbol, props: {content: (string|number)}}|*}\n */\nexport function wrapToVdom(element) {\n  return typeof element === 'string' || typeof element === 'number' ? {\n+    $$typeof: REACT_TEXT, props: element\n  } : element\n}",lang:"diff"}),r.a.createElement("p",null,"src/react.js"),r.a.createElement(c["a"],{code:'+ import {REACT_CONTEXT, REACT_ELEMENT, REACT_FORWARD_REF_TYPE, REACT_MEMO, REACT_PROVIDER} from "./constants";\nimport {shallowEqual, wrapToVdom} from "./utils";\nimport { Component, PureComponent } from "./Component";\nimport { useState, useMemo, useCallback, useReducer, useEffect, useLayoutEffect, useRef } from "./react-dom";\n\n/**\n * \u7528\u6765\u521b\u5efa React \u5143\u7d20\u7684\u5de5\u5382\u65b9\u6cd5\n * @param type \u5143\u7d20\u7684\u7c7b\u578b\n * @param config \u914d\u7f6e\u9879\n * @param children \u513f\u5b50\u4eec\n */\nfunction createElement(type, config, children) {\n  let ref, key;\n  if (config) {\n    ref = config.ref;\n    key = config.key;\n    delete config.ref;\n    delete config.key;\n    delete config.__source;\n    delete config.__self;\n  }\n  let props = { ...config }\n  // \u6709\u591a\u4e2a\u513f\u5b50\uff0cprops.children \u5c31\u662f\u4e00\u4e2a\u6570\u7ec4\n  if (arguments.length > 3) {\n    props.children = Array.prototype.slice.call(arguments, 2).map(wrapToVdom);\n  } else {  // \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u513f\u5b50\n    props.children = wrapToVdom(children)\n  }\n\n  return {\n    $$typeof: REACT_ELEMENT,\n    type,\n    ref,\n    key,\n    props,\n  }\n}\n\nfunction createRef() {\n  return {\n    current: null\n  }\n}\n\nfunction forwardRef(render) {\n  return {\n    $$typeof: REACT_FORWARD_REF_TYPE,\n    render\n  }\n}\n\nfunction createContext() {\n  let context = { $$typeof: REACT_CONTEXT, _currentValue: null }\n  context.Provider = {\n    $$typeof: REACT_PROVIDER,\n    _context: context\n  }\n  context.Consumer = {\n    $$typeof: REACT_CONTEXT,\n    _context: context\n  }\n  return context;\n}\n\nfunction cloneElement(element, newProps, ...newChildren) {\n  let oldChildren = element.props && element.props.children\n  oldChildren = (Array.isArray(oldChildren) ? oldChildren : [oldChildren]).filter(item => typeof item !== "undefined").map(wrapToVdom)\n  newChildren = newChildren.filter(item => typeof item !== "undefined").map(wrapToVdom)\n  let props = {...element.props, ...newProps}\n  if (newChildren.length > 0) {\n    props.children = newChildren\n  } else {\n    props.children = oldChildren\n  }\n  if (props.children.length === 0) {\n    props.children = undefined\n  } else if (props.children.length === 1) {\n    props.children = props.children[0]\n  }\n  return {...element, props}\n}\n\n/**\n *  \u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u5728\u5c5e\u6027\u4e0d\u53d8\u7684\u65f6\u5019\u4e0d\u91cd\u65b0\u6e32\u67d3\u7684\u7ec4\u4ef6\n * @param type \u51fd\u6570\u7ec4\u4ef6\n * @param compare \u6bd4\u8f83\u5c5e\u6027\u662f\u5426\u76f8\u540c\u7684\u65b9\u6cd5\n */\nfunction memo(type, compare = shallowEqual) {\n  return {\n    $$typeof: REACT_MEMO,\n    compare,\n    type\n  }\n}\n\nfunction useContext(context) {\n  return context._currentValue\n}\n\nfunction useImperativeHandle(ref, factory) {\n  ref.current = factory()\n}\n\nconst React = {\n  createElement,\n  Component,\n  createRef,\n  forwardRef,\n  createContext,\n  cloneElement,\n  PureComponent,\n  memo,\n  useState,\n  useMemo,\n  useCallback,\n  useReducer,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n+  useImperativeHandle\n}\nexport default React',lang:"diff"}),r.a.createElement("p",null,"src\\react-dom.js"),r.a.createElement(c["a"],{code:'+ import {\n+   REACT_CONTEXT,\n+   REACT_FORWARD_REF_TYPE, REACT_FRAGMENT,\n+   REACT_MEMO,\n+   REACT_PROVIDER,\n+   REACT_TEXT\n+ } from "./ReactSymbols";\n+ import {\n+   MOVE,\n+   PLACEMENT,\n+ } from \'./ReactFlags\'\nimport {addEvent} from "./event";\n\n// ...\n/**\n * \u628a\u865a\u62df DOM \u8f6c\u6362\u6210\u771f\u5b9e DOM\n * @param vdom \u865a\u62dfDOM\n */\nfunction createDOM(vdom) {\n+  let { type, props, ref, $$typeof } = vdom;\n  let dom;  // \u771f\u5b9eDOM\n\n+  if (type && type === REACT_FRAGMENT) {\n+    dom = document.createDocumentFragment();\n+  } else if ($$typeof && $$typeof === REACT_TEXT) { // \u6587\u672c\u7ec4\u4ef6\n+    dom = document.createTextNode(props)\n+  } else if (type && type.$$typeof === REACT_MEMO) {\n    return mountMemoComponent(vdom)\n  } else if (type && type.$$typeof === REACT_FORWARD_REF_TYPE) { // \u8f6c\u53d1\u7ec4\u4ef6\n    return mountForwardComponent(vdom);\n  } else if(type && type.$$typeof === REACT_PROVIDER) {\n    return mountProviderComponent(vdom)\n  } else if(type && type.$$typeof === REACT_CONTEXT) {\n    return mountContextComponent(vdom)\n  } else if (typeof type === "function") {\n    if (type.isReactComponent) { // \u7c7b\u7ec4\u4ef6\n      return mountClassComponent(vdom);\n    } else { // \u51fd\u6570\u7ec4\u4ef6\n      return mountFunctionComponent(vdom)\n    }\n  } else {\n    dom = document.createElement(type)\n  }\n  if (props) {\n    updateProps(dom, {}, props)\n    const children = props.children\n+    if (Array.isArray(children)) {\n+      reconcileChildren(children, dom);\n+    } else if (typeof children === \'object\' && children.$$typeof) {\n+      children.mountIndex = 0\n+      mount(children, dom)\n+    }\n  }',lang:"diff"})))}));n["default"]=e=>{var n=r.a.useContext(l["context"]),t=n.demos;return r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(a,{demos:t})}}}]);