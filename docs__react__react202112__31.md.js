(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{R6Of:function(e,n,t){"use strict";t.r(n);var r=t("q1tI"),s=t.n(r),o=t("dEAq"),a=t("H1Ra"),i=s.a.memo((e=>{e.demos;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"markdown"},s.a.createElement("h1",{id:"\u4f7f\u7528\u5d4c\u5957\u8def\u7531"},s.a.createElement(o["AnchorLink"],{to:"#\u4f7f\u7528\u5d4c\u5957\u8def\u7531","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528\u5d4c\u5957\u8def\u7531"),s.a.createElement("p",null,"\u8fd9\u91cc\u5148\u628a\u5f15\u7528\u81ea\u5df1\u5199\u7684react-router-dom\u6539\u6210\u4e86\u5b98\u65b9\u7684react-router-dom"),s.a.createElement("h2",{id:"srcindexjs"},s.a.createElement(o["AnchorLink"],{to:"#srcindexjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src\\index.js"),s.a.createElement(a["a"],{code:"import React from 'react';\nimport ReactDOM from 'react-dom';\n+ import {HashRouter, BrowserRouter, Routes, Route, Link, NavLink, Navigate} from './origin/react-router-dom';\nimport Home from './components/Home';\nimport User from './components/User';\n+ import UserList from './components/UserList';\n+ import UserAdd from './components/UserAdd';\n+ import UserDetail from './components/UserDetail';\nimport Profile from './components/Profile';\nimport Protected from './components/Protected'\nimport Login from './components/Login'\nimport Post from './components/Post';\n\nconst activeStyle = { backgroundColor: 'red' }\n\nReactDOM.render(\n  <BrowserRouter>\n    <ul>\n      <li>\n        <NavLink\n          to=\"/\"\n          style={({isActive}) => isActive ? activeStyle : {}}\n          className={({isActive}) => isActive ? 'active' : ''}\n        >\n          \u9996\u9875\n        </NavLink>\n      </li>\n      <li><NavLink to=\"/user\">\u7528\u6237\u7ba1\u7406</NavLink></li>\n      <li><NavLink to=\"/profile\">\u4e2a\u4eba\u4e2d\u5fc3</NavLink></li>\n    </ul>\n    <Routes>\n      <Route path=\"/\" element={<Home name=\"zhufeng\" />} />\n+      <Route path=\"/user/*\" element={<User />}>\n+        <Route path=\"add\" element={<UserAdd />} />\n+        <Route path=\"list\" element={<UserList />} />\n+        <Route path=\"detail/:id\" element={<UserDetail />} />\n+      </Route>\n      <Route path=\"/profile\" element={<Protected component={Profile} path={'/profile'}/>}/>\n      <Route path=\"/post/:id\" element={<Post />}/>\n      <Route path=\"/login\" element={<Login />}/>\n      <Route path=\"/home\" element={<Navigate to=\"/\" />}/>\n    </Routes>\n  </BrowserRouter>\n  ,document.getElementById('root'));\n\n// Switch => Routes\n// component => element\n// render => element",lang:"diff"}),s.a.createElement("h2",{id:"srccomponentsuserjs"},s.a.createElement(o["AnchorLink"],{to:"#srccomponentsuserjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src/components/User.js"),s.a.createElement(a["a"],{code:'import React from \'react\';\n+ import { Link, Outlet } from "../origin/react-router-dom";\n\nfunction User(props) {\n  return (\n+    <div>\n+      <ul>\n+        <li><Link to="/user/list">\u7528\u6237\u5217\u8868</Link></li>\n+        <li><Link to="/user/add">\u65b0\u589e\u7528\u6237</Link></li>\n+      </ul>\n+      <div>\n+        <Outlet></Outlet>\n+      </div>\n+    </div>\n  )\n}\n\nexport default User',lang:"diff"}),s.a.createElement("h2",{id:"srccomponentsuseraddjs"},s.a.createElement(o["AnchorLink"],{to:"#srccomponentsuseraddjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src/components/UserAdd.js"),s.a.createElement(a["a"],{code:"import React from 'react';\nimport { UserAPI } from '../utils'\nimport { useNavigate } from '../origin/react-router-dom'\n\nfunction UserAdd(props) {\n  const usernameRef = React.useRef()\n  const navigate = useNavigate();\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    let username = usernameRef.current.value;\n    UserAPI.add({id: Date.now() + '', username})\n    navigate('/user/list')\n  }\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type=\"text\" ref={usernameRef}/>\n      <button type=\"submit\">\u63d0\u4ea4</button>\n    </form>\n  )\n}\n\nexport default UserAdd",lang:"js"}),s.a.createElement("h2",{id:"srccomponenstuserdetailjs"},s.a.createElement(o["AnchorLink"],{to:"#srccomponenstuserdetailjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src/componenst/UserDetail.js"),s.a.createElement(a["a"],{code:'import React from \'react\';\nimport {UserAPI} from "../utils";\nimport {useLocation, useParams} from "../origin/react-router-dom";\n\nfunction UserDetail(props) {\n  const [user, setUser] = React.useState({});\n  let location = useLocation()\n  let params = useParams(); // \u83b7\u53d6\u5339\u914d\u5bf9\u8c61\n  React.useEffect(() => {\n    let user = location.state;\n    if (!user) {\n      let id = params.id\n      user = UserAPI.find(id)\n    }\n    if (user) setUser(user)\n  }, [location.state, params.id])\n  return (\n    <div>{user.id}:{user.username}</div>\n  )\n}\n\nexport default UserDetail',lang:"js"}),s.a.createElement("h2",{id:"srccomponentsuserlistjs"},s.a.createElement(o["AnchorLink"],{to:"#srccomponentsuserlistjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src/components/UserList.js"),s.a.createElement(a["a"],{code:"import React from 'react';\nimport {UserAPI} from \"../utils\";\nimport { Link } from '../origin/react-router-dom'\n\nfunction UserList(props) {\n  const [users, setUsers] = React.useState([]);\n  React.useEffect(() => {\n    let users = UserAPI.list();\n    setUsers(users);\n  })\n  return (\n    <ul>\n      {users.map(user => {\n        return (\n          <li key={user.id}>\n            <Link to={{pathname: `/user/detail/${user.id}`, state: user}}>{user.username}</Link>\n          </li>\n        )\n      })}\n    </ul>\n  )\n}\n\nexport default UserList",lang:"js"}),s.a.createElement("h2",{id:"srcutilsjs"},s.a.createElement(o["AnchorLink"],{to:"#srcutilsjs","aria-hidden":"true",tabIndex:-1},s.a.createElement("span",{className:"icon icon-link"})),"src/utils.js"),s.a.createElement(a["a"],{code:"export const UserAPI = {\n  list() {\n    let userStr = localStorage.getItem('users');\n    let users = userStr ? JSON.parse(userStr) : [];\n    return users\n  },\n  add(user) {\n    let users = UserAPI.list()\n    users.push(user)\n    localStorage.setItem('users', JSON.stringify(users))\n  },\n  find(id) {\n    let users = UserAPI.list();\n    return users.find(user => user.id === id);\n  }\n}",lang:"js"})))}));n["default"]=e=>{var n=s.a.useContext(o["context"]),t=n.demos;return s.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),s.a.createElement(i,{demos:t})}}}]);