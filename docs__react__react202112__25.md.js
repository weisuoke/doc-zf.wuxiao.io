(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"7PSU":function(n,t,e){"use strict";e.r(t);var r=e("q1tI"),o=e.n(r),a=e("dEAq"),c=e("H1Ra"),i=o.a.memo((n=>{n.demos;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h1",{id:"\u5b9e\u73b0\u57fa\u672c\u8def\u7531"},o.a.createElement(a["AnchorLink"],{to:"#\u5b9e\u73b0\u57fa\u672c\u8def\u7531","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u57fa\u672c\u8def\u7531"),o.a.createElement("h2",{id:"srcreact-routerindexjs"},o.a.createElement(a["AnchorLink"],{to:"#srcreact-routerindexjs","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"src\\react-router\\index.js"),o.a.createElement(c["a"],{code:"import React from 'react'\n+ const NavigationContext = React.createContext();\n+ const LocationContext = React.createContext();\n+ const RouteContext = React.createContext();\n\n+ /**\n+  * \u8def\u7531\u5bb9\u5668\n+  * @param children \u513f\u5b50\n+  * @param navigator \u5386\u53f2\u5bf9\u8c61\uff0c\u5176\u5b9e\u5c31\u662f history\n+  * @param location \u5730\u5740\u5bf9\u8c61\uff0c{pathname: '\u5730\u5740\u8def\u5f84'}\n+  * @returns {JSX.Element}\n+  * @constructor\n+  */\n+ function Router({children, navigator, location}) {\n+   return (\n+     <NavigationContext.Provider value={{navigator}}>\n+       <LocationContext.Provider value={{location}}>\n+         {children}\n+       </LocationContext.Provider>\n+     </NavigationContext.Provider>\n+   )\n+ }\n\n+ function useLocation() {\n+   return React.useContext(LocationContext).location\n+ }\n\n+ function Routes({ children }) {\n+   return useRoutes(createRoutesFromChildren(children))\n+ }\n\n+ function useRoutes(routes) {\n+   let location = useLocation()\n+   let pathname = location.pathname || '/'\n+   for (let i = 0; i < routes.length; i++) {\n+     let { path, element } = routes[i];\n+     let match = matchPath(path, pathname)\n+     if (match) {\n+       return element\n+     }\n+   }\n+ }\n\n+ /**\n+  * \u5224\u65ad\u6b64route\u5bf9\u5e94\u7684path\u8def\u5f84\u548c\u5730\u5740\u4e2d\u7684pathname\u662f\u5426\u5339\u914d\n+  * @param path\n+  * @param pathname\n+  */\n+ function matchPath(path, pathname) {\n+   let matcher = compilePath(path);\n+   let match = pathname.match(matcher)\n+   return match\n+ }\n\n+ /**\n+  * \u628a\u8def\u5f84\u8f6c\u5316\u6210\u6b63\u5219\u8868\u8fbe\u5f0f\n+  * @param path \u8def\u5f84\n+  */\n+ function compilePath(path) {\n+   let regexpSource = \"^\" + path;\n+   regexpSource += '$';\n+   let matcher = new RegExp(regexpSource)\n+   return matcher\n+ }\n\n+ function createRoutesFromChildren(children) {\n+   let routes = [];\n+   React.Children.forEach(children, child => {\n+     let route = {\n+       path: child.props.path, // \u4ee3\u8868 Route \u7684\u8def\u5f84\n+       element: child.props.element  // \u4ee3\u8868\u6b64 Route \u8981\u6e32\u67d3\u7684\u5143\u7d20\n+     }\n+     routes.push(route);\n+   })\n+   return routes\n+ }\n\nfunction Route(props) {\n\n}\n\nexport {Router, Routes, Route}",lang:"diff"}),o.a.createElement("h2",{id:"srcreact-router-domindexjs"},o.a.createElement(a["AnchorLink"],{to:"#srcreact-router-domindexjs","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"src\\react-router-dom\\index.js"),o.a.createElement(c["a"],{code:"+ import React from 'react'\n+ import { Router } from \"../react-router\";\n+ import { createBrowserHistory, createHashHistory } from \"history\";\n+ export * from '../react-router'\n\n/**\n * \u4e00\u4e2a Router \u7528\u5728\u6d4f\u89c8\u5668\u7aef\uff0c\u63d0\u4f9b\u6700\u5e72\u51c0\u7684URL\n * @param ref\n * @constructor\n */\n+ function BrowserRouter({children}) {\n+   let historyRef = React.useRef(null)\n+   if (historyRef.current === null) {\n+     historyRef.current = createBrowserHistory()\n+   }\n+   let history = historyRef.current;\n+   let [state, setState] = React.useState({\n+     action: history.action,\n+     location: history.location\n+   })\n+   React.useLayoutEffect(() => {\n+     history.listen(setState)\n+   }, [history])\n+ \n+   return (\n+     <Router\n+       children={children}\n+       location={state.location}\n+       navigator={history}\n+       navigationType={state.action}\n+     />\n+   )\n+ }\n\n/**\n * \u4e00\u4e2a\u7528\u5728\u6d4f\u89c8\u5668\u7684 Router\n * \u628a\u8def\u5f84\u4fdd\u5b58\u5728 URL \u5730\u5740\u7684 hash \u90e8\u5206\uff0c\u4ee5\u4fbf\u5728\u6539\u53d8\u7684\u65f6\u5019\u4e0d\u4f1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\n * @param children\n * @constructor\n */\n+ function HashRouter({ children }) {\n+   let historyRef = React.useRef(null)\n+   if (historyRef.current === null) {\n+     historyRef.current = createHashHistory()\n+   }\n+   let history = historyRef.current;\n+   let [state, setState] = React.useState({\n+     action: history.action,\n+     location: history.location\n+   })\n+   React.useLayoutEffect(() => {\n+     history.listen(setState)\n+   }, [history])\n+ \n+   return (\n+     <Router\n+       children={children}\n+       location={state.location}\n+       navigator={history}\n+       navigationType={state.action}\n+     />\n+   )\n+ }\n\nexport {\n  BrowserRouter,\n  HashRouter\n}",lang:"diff"})))}));t["default"]=n=>{var t=o.a.useContext(a["context"]),e=t.demos;return o.a.useEffect((()=>{var t;null!==n&&void 0!==n&&null!==(t=n.location)&&void 0!==t&&t.hash&&a["AnchorLink"].scrollToAnchor(decodeURIComponent(n.location.hash.slice(1)))}),[]),o.a.createElement(i,{demos:e})}}}]);