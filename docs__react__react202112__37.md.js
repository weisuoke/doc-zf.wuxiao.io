(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{T9eD:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),c=n("dEAq"),l=n("H1Ra"),i=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"\u5b9e\u73b0createstore"},r.a.createElement(c["AnchorLink"],{to:"#\u5b9e\u73b0createstore","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0createStore"),r.a.createElement("h2",{id:"redux\u5e94\u7528\u573a\u666f"},r.a.createElement(c["AnchorLink"],{to:"#redux\u5e94\u7528\u573a\u666f","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Redux\u5e94\u7528\u573a\u666f"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u968f\u7740 JavaScript \u5355\u9875\u5e94\u7528\u5f00\u53d1\u65e5\u8d8b\u590d\u6742,\u7ba1\u7406\u4e0d\u65ad\u53d8\u5316\u7684 state \u975e\u5e38\u56f0\u96be"),r.a.createElement("li",null,"Redux\u7684\u51fa\u73b0\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3state\u91cc\u7684\u6570\u636e\u95ee\u9898"),r.a.createElement("li",null,"\u5728React\u4e2d\uff0c\u6570\u636e\u5728\u7ec4\u4ef6\u4e2d\u662f\u5355\u5411\u6d41\u52a8\u7684"),r.a.createElement("li",null,"\u6570\u636e\u4ece\u4e00\u4e2a\u65b9\u5411\u7236\u7ec4\u4ef6\u6d41\u5411\u5b50\u7ec4\u4ef6(\u901a\u8fc7props)\uff0c\u7531\u4e8e\u8fd9\u4e2a\u7279\u5f81\uff0c\u4e24\u4e2a\u975e\u7236\u5b50\u5173\u7cfb\u7684\u7ec4\u4ef6\uff08\u6216\u8005\u79f0\u4f5c\u5144\u5f1f\u7ec4\u4ef6\uff09\u4e4b\u95f4\u7684\u901a\u4fe1\u5c31\u6bd4\u8f83\u9ebb\u70e6")),r.a.createElement("p",null,r.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-03-140707.png",alt:"redux-wrong"})),r.a.createElement("h2",{id:"redux\u8bbe\u8ba1\u601d\u60f3"},r.a.createElement(c["AnchorLink"],{to:"#redux\u8bbe\u8ba1\u601d\u60f3","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Redux\u8bbe\u8ba1\u601d\u60f3"),r.a.createElement("ul",null,r.a.createElement("li",null,"Redux\u662f\u5c06\u6574\u4e2a\u5e94\u7528\u72b6\u6001\u5b58\u50a8\u5230\u5230\u4e00\u4e2a\u5730\u65b9\uff0c\u79f0\u4e3astore"),r.a.createElement("li",null,"\u91cc\u9762\u4fdd\u5b58\u4e00\u68f5\u72b6\u6001\u6811state tree"),r.a.createElement("li",null,"\u7ec4\u4ef6\u53ef\u4ee5\u6d3e\u53d1dispatch\u884c\u4e3aaction\u7ed9store,\u800c\u4e0d\u662f\u76f4\u63a5\u901a\u77e5\u5176\u5b83\u7ec4\u4ef6"),r.a.createElement("li",null,"\u5176\u5b83\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7\u8ba2\u9605store\u4e2d\u7684\u72b6\u6001(state)\u6765\u5237\u65b0\u81ea\u5df1\u7684\u89c6\u56fe")),r.a.createElement("p",null,r.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-02-03-140729.png",alt:"redux-flow"})),r.a.createElement("h2",{id:"redux\u4e09\u5927\u539f\u5219"},r.a.createElement(c["AnchorLink"],{to:"#redux\u4e09\u5927\u539f\u5219","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"Redux\u4e09\u5927\u539f\u5219"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u6574\u4e2a\u5e94\u7528\u7684 state \u88ab\u50a8\u5b58\u5728\u4e00\u68f5 object tree \u4e2d\uff0c\u5e76\u4e14\u8fd9\u4e2a object tree \u53ea\u5b58\u5728\u4e8e\u552f\u4e00\u4e00\u4e2a store \u4e2d"),r.a.createElement("li",null,"State \u662f\u53ea\u8bfb\u7684\uff0c\u60df\u4e00\u6539\u53d8 state \u7684\u65b9\u6cd5\u5c31\u662f\u89e6\u53d1 action\uff0caction \u662f\u4e00\u4e2a\u7528\u4e8e\u63cf\u8ff0\u5df2\u53d1\u751f\u4e8b\u4ef6\u7684\u666e\u901a\u5bf9\u8c61 \u4f7f\u7528\u7eaf\u51fd\u6570\u6765\u6267\u884c\u4fee\u6539\uff0c\u4e3a\u4e86\u63cf\u8ff0action\u5982\u4f55\u6539\u53d8state tree \uff0c\u4f60\u9700\u8981\u7f16\u5199 reducers"),r.a.createElement("li",null,"\u5355\u4e00\u6570\u636e\u6e90\u7684\u8bbe\u8ba1\u8ba9React\u7684\u7ec4\u4ef6\u4e4b\u95f4\u7684\u901a\u4fe1\u66f4\u52a0\u65b9\u4fbf\uff0c\u540c\u65f6\u4e5f\u4fbf\u4e8e\u72b6\u6001\u7684\u7edf\u4e00\u7ba1\u7406")),r.a.createElement("h2",{id:"\u539f\u751f\u8ba1\u6570\u5668"},r.a.createElement(c["AnchorLink"],{to:"#\u539f\u751f\u8ba1\u6570\u5668","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u539f\u751f\u8ba1\u6570\u5668"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c["Link"],{to:"https://github.com/reduxjs/redux"},"redux")),r.a.createElement("li",null,r.a.createElement(c["Link"],{to:"https://gitee.com/zhufengpeixun/redux/blob/master/src/createStore.ts"},"createStore.ts"))),r.a.createElement(l["a"],{code:"create-react-app zhufeng_redux_prepare\ncd zhufeng_redux_prepare\ncnpm install redux -S\nyarn start",lang:"js"}),r.a.createElement("h3",{id:"publicindexhtml"},r.a.createElement(c["AnchorLink"],{to:"#publicindexhtml","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"public\\index.html"),r.a.createElement("p",null,"public\\index.html"),r.a.createElement(l["a"],{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <meta name="theme-color" content="#000000" />\n    <meta\n      name="description"\n      content="Web site created using create-react-app"\n    />\n    <title>React App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <div id="counter">\n      <p id="counter-value">0</p>\n      <button id="add-btn">+</button>\n      <button id="minus-btn">-</button>\n    </div>\n  </body>\n</html>',lang:"html"}),r.a.createElement("h3",{id:"srcindexjs"},r.a.createElement(c["AnchorLink"],{to:"#srcindexjs","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"src\\index.js"),r.a.createElement("p",null,"src\\index.js"),r.a.createElement(l["a"],{code:"import { createStore} from './redux';\nlet counterValue = document.getElementById('counter-value');\nlet incrementBtn = document.getElementById('add-btn');\nlet decrementBtn = document.getElementById('minus-btn');\n\nconst INCREMENT = 'INCREMENT';\nconst DECREMENT = 'DECREMENT';\nlet initState = { number: 0 };\n\nconst reducer = (state = initState, action) => {\n    switch (action.type) {\n        case INCREMENT:\n            return { number: state.number + 1 };\n        case DECREMENT:\n            return { number: state.number - 1 };\n        default:\n            return state;\n    }\n}\nlet store = createStore(reducer);\nfunction render() {\n    counterValue.innerHTML = store.getState().number + '';\n}\nstore.subscribe(render);\nrender();\nincrementBtn.addEventListener('click', function () {\n    store.dispatch({ type: INCREMENT });\n});\ndecrementBtn.addEventListener('click', function () {\n    store.dispatch({ type: DECREMENT });\n});",lang:"js"}),r.a.createElement("h3",{id:"srcreduxindexjs"},r.a.createElement(c["AnchorLink"],{to:"#srcreduxindexjs","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"src\\redux\\index.js"),r.a.createElement("p",null,"src\\redux\\index.js"),r.a.createElement(l["a"],{code:"import createStore from './createStore'\nexport {\n    createStore\n}",lang:"js"}),r.a.createElement("h3",{id:"srcreduxcreatestorejs"},r.a.createElement(c["AnchorLink"],{to:"#srcreduxcreatestorejs","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"src\\redux\\createStore.js"),r.a.createElement(l["a"],{code:"/**\n * \u521b\u5efa\u4ed3\u5e93\n * @param reducer \u8ba1\u7b97\u65b0\u72b6\u6001\u7684\u5904\u7406\u5668\n * @param initialState \u521d\u59cb\u72b6\u6001\n */\nfunction createStore(reducer, initialState) {\n  // \u73b0\u5728\u4ed3\u5e93\u5185\u90e8\u5b9a\u4e49\u4e00\u4e2a\u521d\u59cb\u72b6\u6001\n  let state = initialState\n  // \u76d1\u542c\u51fd\u6570\u7684\u6570\u7ec4\n  let listeners = []\n  function getState() {\n    return state;\n  }\n  function dispatch(action) {\n    // \u5148\u6839\u636e\u8001\u72b6\u6001\u548c\u65b0\u7684\u52a8\u4f5c\u5bf9\u8c61\u8ba1\u7b97\u65b0\u72b6\u6001\n    state = reducer(state, action)\n    // \u8ba9\u76d1\u542c\u51fd\u6570\u4f9d\u6b21\u6267\u884c\n    listeners.forEach(listener => listener())\n  }\n  function subscribe(listener) {\n    listeners.push(listener)\n    // \u8fd4\u56de\u4e00\u4e2a\u53d6\u6d88\u6b64\u76d1\u542c\u7684\u51fd\u6570\n    return () => {\n      listeners = listeners.filter(item => item !== listener)\n    }\n  }\n  // \u6d3e\u53d1\u8fd9\u4e2a\u52a8\u4f5c\u662f\u4e3a\u4e86\u7ed9\u521d\u59cb\u72b6\u6001\u8d4b\u503c\n  dispatch({type: '@@REDUX/INIT'})\n  return { getState, dispatch, subscribe }\n}\n\nexport default createStore",lang:"js"})))}));t["default"]=e=>{var t=r.a.useContext(c["context"]),n=t.demos;return r.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&c["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(i,{demos:n})}}}]);