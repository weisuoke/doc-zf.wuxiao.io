(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{iv1I:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),o=t.n(a),s=t("dEAq"),l=t("H1Ra"),r=o.a.memo((e=>{e.demos;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h1",{id:"promiseall\u7684\u5b9e\u73b0\u539f\u7406"},o.a.createElement(s["AnchorLink"],{to:"#promiseall\u7684\u5b9e\u73b0\u539f\u7406","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"Promise.all\u7684\u5b9e\u73b0\u539f\u7406"),o.a.createElement("p",null,"10.all-finally.js"),o.a.createElement(l["a"],{code:"const fs = require('fs').promises\n\nPromise.all = function(promises) {\n  return new Promise((resolve, reject) => {\n    // \u5c06\u6570\u7ec4\u4e2d\u7684 promise \u4f9d\u6b21\u6267\u884c\n    let result = [];\n    let index = 0;\n\n    function process(v, k) {\n      result[k] = v\n      if (++index === promises.length) {  // \u89e3\u51b3\u591a\u4e2a\u5f02\u6b65\u5e76\u53d1\u95ee\u9898 \u53ea\u80fd\u9760\u8ba1\u6570\u5668\n        resolve(result)\n      }\n    }\n\n    for (let i = 0; i < promises.length; i++) {\n      let p = promises[i]\n      if (p && typeof p.then === 'function') {\n        p.then(data => {\n          process(data, i)\n        }, reject)  // \u5982\u679c\u6709\u4e00\u4e2a promise \u5931\u8d25\u4e86\uff0c\u90a3\u4e48\u5c31\u6267\u884c\u6700\u540e\u7684\u5931\u8d25\u903b\u8f91\n      } else {\n        process(p, i)\n      }\n    }\n  })\n}\n\nPromise.all([fs.readFile('name.txt', 'utf8'), fs.readFile('age.txt', 'utf8')]).then(data => {\n  console.log(data)\n})",lang:"js"})))}));n["default"]=e=>{var n=o.a.useContext(s["context"]),t=n.demos;return o.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&s["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.a.createElement(r,{demos:t})}}}]);