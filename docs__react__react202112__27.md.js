(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"dTp+":function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),o=t.n(a),r=t("dEAq"),c=t("H1Ra"),m=o.a.memo((e=>{e.demos;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h1",{id:"\u5b9e\u73b0\u8def\u5f84\u53c2\u6570"},o.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u73b0\u8def\u5f84\u53c2\u6570","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u8def\u5f84\u53c2\u6570"),o.a.createElement("h2",{id:"srcindexjs"},o.a.createElement(r["AnchorLink"],{to:"#srcindexjs","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"src\\index.js"),o.a.createElement(c["a"],{code:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter, BrowserRouter, Routes, Route} from './react-router-dom';\nimport Home from './components/Home';\nimport User from './components/User';\nimport Profile from './components/Profile';\n+ import Post from './components/Post';\n\nReactDOM.render(\n  <BrowserRouter>\n    <Routes>\n      <Route path=\"/\" element={<Home name=\"zhufeng\" />} />\n      <Route path=\"/user\" element={<User />} />\n      <Route path=\"/profile\" element={<Profile />}/>\n+      <Route path=\"/post/:id\" element={<Post />}/>\n    </Routes>\n  </BrowserRouter>\n  ,document.getElementById('root'));\n\n// Switch => Routes\n// component => element\n// render => element",lang:"diff"}),o.a.createElement("h2",{id:"srccomponentspostjs"},o.a.createElement(r["AnchorLink"],{to:"#srccomponentspostjs","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"src\\components\\Post.js"),o.a.createElement(c["a"],{code:"import React from 'react';\n\nfunction Post(props) {\n  return (\n    <div>Post</div>\n  )\n}\n\nexport default Post",lang:"js"}),o.a.createElement("h3",{id:"srcreact-routerindexjs"},o.a.createElement(r["AnchorLink"],{to:"#srcreact-routerindexjs","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"src\\react-router\\index.js"),o.a.createElement(c["a"],{code:"import React from 'react'\nconst NavigationContext = React.createContext();\nconst LocationContext = React.createContext();\nconst RouteContext = React.createContext();\n\n/**\n * \u8def\u7531\u5bb9\u5668\n * @param children \u513f\u5b50\n * @param navigator \u5386\u53f2\u5bf9\u8c61\uff0c\u5176\u5b9e\u5c31\u662f history\n * @param location \u5730\u5740\u5bf9\u8c61\uff0c{pathname: '\u5730\u5740\u8def\u5f84'}\n * @returns {JSX.Element}\n * @constructor\n */\nfunction Router({children, navigator, location}) {\n  return (\n    <NavigationContext.Provider value={{navigator}}>\n      <LocationContext.Provider value={{location}}>\n        {children}\n      </LocationContext.Provider>\n    </NavigationContext.Provider>\n  )\n}\n\nfunction useLocation() {\n  return React.useContext(LocationContext).location\n}\n\nfunction Routes({ children }) {\n  return useRoutes(createRoutesFromChildren(children))\n}\n\nfunction useRoutes(routes) {\n  let location = useLocation()\n  let pathname = location.pathname || '/'\n  for (let i = 0; i < routes.length; i++) {\n    let { path, element } = routes[i];\n    let match = matchPath(path, pathname)\n    if (match) {\n+      return React.cloneElement(element, {...element.props, match})\n    }\n  }\n}\n\n/**\n * \u5224\u65ad\u6b64route\u5bf9\u5e94\u7684path\u8def\u5f84\u548c\u5730\u5740\u4e2d\u7684pathname\u662f\u5426\u5339\u914d\n * @param path\n * @param pathname\n */\nfunction matchPath(path, pathname) {\n+  let [matcher, paramNames] = compilePath(path);\n  let match = pathname.match(matcher)\n+  if (!match) return null\n+  let matchedPathname = match[0]; // \u5339\u914d\u5230\u7684\u8def\u5f84\n+  let values = match.slice(1) // \u5206\u7ec4\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8def\u5f84\u53c2\u6570\u7684\u6570\u7ec4\n+  let params = paramNames.reduce((memo, paramNames, index) => {\n+    memo[paramNames] = values[index]\n+    return memo\n+  }, {})\n+  return {params, pathname: matchedPathname, path}\n}\n\n/**\n * \u628a\u8def\u5f84\u8f6c\u5316\u6210\u6b63\u5219\u8868\u8fbe\u5f0f\n * @param path \u8def\u5f84\n */\nfunction compilePath(path) {\n+  let paramNames = []\n  let regexpSource = \"^\" + path.replace(/:(\\w+)/g, (_, key) => {\n+    paramNames.push(key);\n+    return \"([^\\\\/]+)\"\n+  });\n  regexpSource += '$';\n  let matcher = new RegExp(regexpSource)\n+  return [matcher, paramNames]\n}\n\nfunction createRoutesFromChildren(children) {\n  let routes = [];\n  React.Children.forEach(children, child => {\n    let route = {\n      path: child.props.path, // \u4ee3\u8868 Route \u7684\u8def\u5f84\n      element: child.props.element  // \u4ee3\u8868\u6b64 Route \u8981\u6e32\u67d3\u7684\u5143\u7d20\n    }\n    routes.push(route);\n  })\n  return routes\n}\n\nfunction Route(props) {\n\n}\n\nexport {Router, Routes, Route}",lang:"diff"})))}));n["default"]=e=>{var n=o.a.useContext(r["context"]),t=n.demos;return o.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.a.createElement(m,{demos:t})}}}]);