(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{u4Ka:function(e,n,t){"use strict";t.r(n);var o=t("q1tI"),r=t.n(o),l=t("dEAq"),a=t("H1Ra"),c=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"\u5b9e\u73b0\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6"},r.a.createElement(l["AnchorLink"],{to:"#\u5b9e\u73b0\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6"),r.a.createElement("h2",{id:"\u7ec4\u4ef6"},r.a.createElement(l["AnchorLink"],{to:"#\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u53ef\u4ee5\u5c06UI\u5207\u5206\u6210\u4e00\u4e9b\u72ec\u7acb\u7684\u3001\u53ef\u590d\u7528\u7684\u7ec4\u4ef6\uff0c\u8fd9\u6837\u4f60\u5c31\u53ea\u9700\u4e13\u6ce8\u4e8e\u6784\u5efa\u6bcf\u4e00\u4e2a\u5355\u72ec\u7684\u90e8\u4ef6"),r.a.createElement("li",null,"\u7ec4\u4ef6\u4ece\u6982\u5ff5\u4e0a\u7c7b\u4f3c\u4e8e ",r.a.createElement("code",null,"JavaScript")," \u51fd\u6570\u3002\u5b83\u63a5\u53d7\u4efb\u610f\u7684\u5165\u53c2(props\u5c5e\u6027)\uff0c\u5e76\u8fd4\u56de\u7528\u4e8e\u63cf\u8ff0\u9875\u9762\u5c55\u793a\u5185\u5bb9\u7684 React \u5143\u7d20")),r.a.createElement("h3",{id:"\u51fd\u6570\u5b9a\u4e49\u7684\u7ec4\u4ef6"},r.a.createElement(l["AnchorLink"],{to:"#\u51fd\u6570\u5b9a\u4e49\u7684\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u51fd\u6570(\u5b9a\u4e49\u7684)\u7ec4\u4ef6"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u51fd\u6570\u7ec4\u4ef6\u63a5\u6536\u4e00\u4e2a\u5355\u4e00\u7684props\u5bf9\u8c61\u5e76\u8fd4\u56de\u4e86\u4e00\u4e2aReact\u5143\u7d20"),r.a.createElement("li",null,"\u7ec4\u4ef6\u540d\u79f0\u5fc5\u987b\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934"),r.a.createElement("li",null,"\u7ec4\u4ef6\u5fc5\u987b\u5728\u4f7f\u7528\u7684\u65f6\u5019\u5b9a\u4e49\u6216\u5f15\u7528\u5b83"),r.a.createElement("li",null,"\u7ec4\u4ef6\u7684\u8fd4\u56de\u503c\u53ea\u80fd\u6709\u4e00\u4e2a\u6839\u5143\u7d20"),r.a.createElement("li",null,"React\u5143\u7d20\u4e0d\u4f46\u53ef\u4ee5\u662fDOM\u6807\u7b7e\uff0c\u8fd8\u53ef\u4ee5\u662f\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6"),r.a.createElement("li",null,"\u5f53 React \u5143\u7d20\u4e3a\u7528\u6237\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u65f6\uff0c\u5b83\u4f1a\u5c06 JSX \u6240\u63a5\u6536\u7684\u5c5e\u6027\uff08attributes\uff09\u8f6c\u6362\u4e3a\u5355\u4e2a\u5bf9\u8c61\u4f20\u9012\u7ed9\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u88ab\u79f0\u4e4b\u4e3a",r.a.createElement("code",null,"props"))),r.a.createElement("p",null,r.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-01-26-150957.png",alt:"xuan_ran_han_shu_zu_jian_1626351799850"})),r.a.createElement("h4",{id:"\u5b9e\u73b0"},r.a.createElement(l["AnchorLink"],{to:"#\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0"),r.a.createElement("p",null,"src\\react-dom.js"),r.a.createElement(a["a"],{code:"import { REACT_TEXT } from \"./constants\";\nfunction render(vdom, parentDOM) {\n    let newDOM = createDOM(vdom)\n    if (newDOM) {\n        parentDOM.appendChild(newDOM);\n    }\n}\nexport function createDOM(vdom) {\n  let { type, props } = vdom;\n  let dom;\n  if (type === REACT_TEXT) {\n    dom = document.createTextNode(props);\n+ } else if (typeof type === \"function\") {\n+   return mountFunctionComponent(vdom);\n+ } else {\n    dom = document.createElement(type);\n  }\n  if (props) {\n    updateProps(dom, {}, props);\n    if (typeof props.children == \"object\" && props.children.type) {\n      mount(props.children, dom);\n    } else if (Array.isArray(props.children)) {\n      reconcileChildren(props.children, dom);\n    }\n  }\n  vdom.dom = dom;\n  return dom;\n}\n+function mountFunctionComponent(vdom){\n+    let {type,props}= vdom;\n+    let renderVdom = type(props);\n+    return createDOM(renderVdom);\n+}\nfunction updateProps(dom, oldProps={}, newProps={}) {\n    for (let key in newProps) {\n        if (key === 'children') {\n            continue;\n        } else if (key === 'style') {\n            let styleObj = newProps[key];\n            for (let attr in styleObj) {\n                dom.style[attr] = styleObj[attr];\n            }\n        } else if (key.startsWith('on')) {\n            addEvent(dom, key.toLocaleLowerCase(), newProps[key]);\n        } else {\n            dom[key] = newProps[key];\n        }\n    }\n    for(let key in oldProps){\n        if(!newProps.hasOwnProperty(key)){\n            dom[key] = null;\n        }\n    }\n}\nfunction reconcileChildren(childrenVdom, parentDOM) {\n  for (let i = 0; i < childrenVdom.length; i++) {\n    let childVdom = childrenVdom[i];\n    mount(childVdom, parentDOM);\n  }\n}\nconst ReactDOM = {\n  render,\n};\nexport default ReactDOM;",lang:"diff"}),r.a.createElement("h3",{id:"\u7c7b\u5b9a\u4e49\u7684\u7ec4\u4ef6"},r.a.createElement(l["AnchorLink"],{to:"#\u7c7b\u5b9a\u4e49\u7684\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u7c7b(\u5b9a\u4e49\u7684)\u7ec4\u4ef6"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7c7b\u5b9a\u4e49\u7ec4\u4ef6"),r.a.createElement("li",null,"\u7c7b\u7ec4\u4ef6\u7684\u6e32\u67d3\u662f\u6839\u636e\u5c5e\u6027\u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5e76\u8c03\u7528\u5b9e\u4f8b\u7684render\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2aReact\u5143\u7d20")),r.a.createElement("p",null,r.a.createElement("img",{src:"http://wuxiao-tech-doc.oss-cn-hangzhou.aliyuncs.com/2022-01-26-151042.png",alt:"lei_zu_jian_xuan_ran_1626352042061"})),r.a.createElement("p",null,"src\\index.js"),r.a.createElement(a["a"],{code:'import React from "./react";\nimport ReactDOM from "./react-dom";\n+class ClassComponent extends React.Component{\n+    render(){\n+        return <div className="title" style={{ color: \'red\' }}><span>{this.props.name}</span>{this.props.children}</div>;\n+    }\n+}\n+let element = <ClassComponent name="hello">world</ClassComponent>;\nReactDOM.render(element, document.getElementById("root"));',lang:"diff"}),r.a.createElement("p",null,"src\\Component.js"),r.a.createElement(a["a"],{code:"export class Component{\n    static isReactComponent=true\n    constructor(props){\n        this.props = props;\n    }\n}",lang:"js"}),r.a.createElement("p",null,"src\\react.js"),r.a.createElement(a["a"],{code:"import { wrapToVdom } from \"./utils\";\n+import {Component} from './Component';\nfunction createElement(type, config, children) {\n  let ref;\n  let key;\n  if (config) {\n    delete config.__source;\n    delete config.__self;\n    ref = config.ref;\n    delete config.ref;\n    key = config.key;\n    delete config.key;\n  }\n  let props = { ...config };\n  if (arguments.length > 3) {\n    props.children = Array.prototype.slice.call(arguments, 2).map(wrapToVdom);\n  } else {\n    props.children = wrapToVdom(children);\n  }\n  return {\n    type,\n    ref,\n    key,\n    props,\n  };\n}\nconst React = {\n  createElement,\n+  Component\n};\nexport default React;",lang:"diff"}),r.a.createElement("p",null,"src\\react-dom.js"),r.a.createElement(a["a"],{code:"import { REACT_TEXT } from \"./constants\";\nfunction render(vdom, parentDOM) {\n    let newDOM = createDOM(vdom)\n    if (newDOM) {\n        parentDOM.appendChild(newDOM);\n    }\n}\nexport function createDOM(vdom) {\n  let { type, props } = vdom;\n  let dom;\n  if (type === REACT_TEXT) {\n    dom = document.createTextNode(props);\n  } else if (typeof type === \"function\") {\n+    if (type.isReactComponent) {\n+      return mountClassComponent(vdom);\n+    } else {\n      return mountFunctionComponent(vdom);\n    }\n  } else {\n    dom = document.createElement(type);\n  }\n  if (props) {\n    updateProps(dom, {}, props);\n    if (typeof props.children == \"object\" && props.children.type) {\n      mount(props.children, dom);\n    } else if (Array.isArray(props.children)) {\n      reconcileChildren(props.children, dom);\n    }\n  }\n  vdom.dom = dom;\n  return dom;\n}\n+function mountClassComponent(vdom){\n+    let {type,props}= vdom;\n+    let classInstance = new type(props);\n+    let renderVdom = classInstance.render();\n+    let dom =  createDOM(renderVdom);\n+    return dom;\n+}\nfunction mountFunctionComponent(vdom) {\n  let { type, props } = vdom;\n  let renderVdom = type(props);\n  return createDOM(renderVdom);\n}\nfunction updateProps(dom, oldProps={}, newProps={}) {\n    for (let key in newProps) {\n        if (key === 'children') {\n            continue;\n        } else if (key === 'style') {\n            let styleObj = newProps[key];\n            for (let attr in styleObj) {\n                dom.style[attr] = styleObj[attr];\n            }\n        } else if (key.startsWith('on')) {\n            addEvent(dom, key.toLocaleLowerCase(), newProps[key]);\n        } else {\n            dom[key] = newProps[key];\n        }\n    }\n    for(let key in oldProps){\n        if(!newProps.hasOwnProperty(key)){\n            dom[key] = null;\n        }\n    }\n}\nfunction reconcileChildren(childrenVdom, parentDOM) {\n  for (let i = 0; i < childrenVdom.length; i++) {\n    let childVdom = childrenVdom[i];\n    mount(childVdom, parentDOM);\n  }\n}\nconst ReactDOM = {\n  render,\n};\nexport default ReactDOM;",lang:"diff"})))}));n["default"]=e=>{var n=r.a.useContext(l["context"]),t=n.demos;return r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(c,{demos:t})}}}]);